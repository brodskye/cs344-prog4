#include <stdio.h>

//client connecting to server
int sockfd;

struct hostent *server_ip_address;
server_ip_address = gethostbyname("www.engr.orst.edu");

if (server_ip_address == NULL){
  fprintf(stderr, "could not resolve server host name\n");
  exit(1);
}

//create socket
if ((sockfd = socket(AF_INET, SOCK_STREAM, 0) == -1){
  perror("socket");
  exit(1);
}

//connect socket
if (connect(sockfd, (struct sockaddr *) &server, sizeof(server)) == -1){
  perror("connect");
  exit(1);
}

server.sin_family = AF_INET;
server.sin_port = htons(80);

memcpy(&server.sin_addr, server_ip_address->h_addr, server_ip_address->h_length);

//server accepting connections
struct sockaddr_in server;

server.sin_family = AF_INET;
server.sin_port = htons(7000);
server.sin_addr.s_addr = INADDR_ANY;

//sending data
int r;
char request[1024];
r = send(sockfd, request, 1024, 0);
if (r < 1024){
//handle possible error
}

//receiving data
char buffer[1024];
r = recv(sockfd, buffer, 1024, 0);
if (r < 1024){
  //error if r == -1
  //if 0 < r < 1024, may be more data
  //if r == 0, end of data
}
